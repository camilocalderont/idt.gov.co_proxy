# ========================================
# CONFIGURACI칍N LITESPEED - SIN suEXEC
# IDT.gov.co - Funcional para producci칩n
# ========================================

# Configuraci칩n b치sica del servidor
user                      nobody
group                     nogroup
autoRestart               1

# Logs b치sicos
errorlog $SERVER_ROOT/logs/error.log {
  logLevel                INFO
  rollingSize             10M
}

accesslog $SERVER_ROOT/logs/access.log {
  rollingSize             10M
  keepDays                7
}

# MIME types (requerido)
mime                      conf/mime.properties

# 游댠 PROCESADOR PHP SIN suEXEC
extprocessor lsphp83 {
  type                    lsapi
  address                 uds://tmp/lshttpd/lsphp.sock
  maxConns                50
  env                     PHP_LSAPI_CHILDREN=50
  initTimeout             60
  retryTimeout            0
  autoStart               1
  path                    /usr/local/lsws/lsphp83/bin/lsphp
  runOnStartUp            3
  extUser                 nobody
  extGroup                nogroup
}

# 游댠 LISTENER B츼SICO
listener Default {
  address                 *:80
  secure                  0
  map                     drupal10 *
}

# 游댠 VIRTUAL HOST CON SCRIPTHANDLER INTERNO
virtualhost drupal10 {
  vhRoot                  /var/www/html
  docRoot                 /var/www/html

  # Script handler dentro del virtual host
  scripthandler {
    add lsapi:lsphp83 php
  }

  # 游댠 HABILITAR .htaccess PARA DRUPAL
  rewrite  {
    enable                1
    autoLoadHtaccess      1
  }

  # Archivos 칤ndice b치sicos
  index  {
    indexFiles            index.php, index.html
  }
}